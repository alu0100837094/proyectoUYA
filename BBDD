CREATE TABLE USUARIO
(
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
fk_us INT(6) UNSIGNED NOT NULL,
nombre VARCHAR(30) NOT NULL,
apellidos VARCHAR(30) NOT NULL,
email VARCHAR(50) NOT NULL,
password VARCHAR(10)  NOT NULL,
fecha_reg TIMESTAMP
);


CREATE TABLE PUBLICACION
(
id_pu INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
fk_pu INT(6) UNSIGNED NOT NULL,
descripcion VARCHAR(200),
zona VARCHAR(30) NOT NULL,
foto BLOB,
precio INT(5) NOT NULL,
banho INT(2) NOT NULL,
habitaciones INT(2) NOT NULL,
FOREIGN KEY (fk_pu) REFERENCES USUARIO(id)
);


CREATE TABLE MENSAJE
(
id_me INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
fk_me INT(6) UNSIGNED NOT NULL,
texto VARCHAR(300) NOT NULL,
tipo VARCHAR(3) NOT NULL,
FOREIGN KEY (fk_me) REFERENCES USUARIO(id) ON DELETE CASCADE
);

CREATE TABLE FAVORITO
(
id_fa INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY
);


CREATE TABLE AGREGADO
(
id_agr INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
fk_agr INT(6) UNSIGNED NOT NULL,
fecha TIMESTAMP,
FOREIGN KEY (fk_agr) REFERENCES USUARIO(id) ON DELETE CASCADE,
FOREIGN KEY (fk_agr) REFERENCES FAVORITO(id_fa) ON DELETE CASCADE
);




DROP TABLE USUARIO;
DROP TABLE PUBLICACION;
DROP TABLE FAVORITO;
DROP TABLE AGREGADO;
DROP TABLE MENSAJE;
